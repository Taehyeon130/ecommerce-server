# 요구사항 정의

## e-commerce 상품 주문 서비스

### 1. 사용자 식별 API
#### 📌 기능적 요구사항 
    - 사용자를 특정할 수 있도록 인증 토큰 발급
#### 📌 비기능적 요구사항
     - JWT를 이용해 토큰 발급
---
### 2. 잔액 조회, 충전 API
#### 📌 기능적 요구사항
    - 토큰값으로 특정 사용자의 잔액을 조회
    - 충전금액은 0보다 큰 수
    - 최대 충전 가능 금액은 100만원으로 제한
    - 사용자의 잔액 사용, 충전 이력 조회
#### 📌 비기능적 요구사항
    - 사용자 토큰과 동시성 제어를 통해서 사용자 본인만이 자신의 잔액을 조회하고 충전할 수 있도록 함
---
### 3. 상품 조회 API
#### 📌  기능적 요구사항
    - 판매가능 상태의 상품정보(상품명, 상품 ID, 상품가격, 상품 재고) 조회
    - 상품의 재고가 0보다 작은 경우 판매 불가능 상태로 업데이트
#### 📌 비기능적 요구사항
    - 다수의 사람이 동시에 상품을 겁색, 조회 할 경우 속도 제어 필요
    - 주문 생성시 데이터 정합성에 맞게 상품의 재고가 조회되도록 해야함
---
### 4. 주문 API
#### 📌 기능적 요구사항
    - 사용자가 선택한 상품ID, 수량, 가격, 쿠폰 사용여부 정보 기반 주문 생성
    - 주문 생성 후 결제 대기 상태 진입
    - 상품의 수량, 사용자의 잔액 조회 후 결제 가능 상태일 경우 결제 진행
    - 사용자의 주문 실패, 주문 완료의 주문 이력 조회
    - 쿠폰을 통한 주문 생성 시 결제금액보다 큰 금액의 쿠폰은 사용불가능
#### 📌 비기능적 요구사항
    - 동시 주문시 상품의 재고 처리 정확해야함
---
### 5. 결제 API
#### 📌  기능적 요구사항    
    - 사용자의 충전된 잔액을 이용해 결제 진행
    - 사용자의 잔액이 결제 금액((상품가격 * 주문 수량) - 쿠폰 가격) 보다 작은 경우 결제를 진행 할 수 없음
    - 결제 후 사용자의 잔액 차감, 상품 수량 차감되어야함
    - 결제 후 주문의 상태는 주문 완료 상태로 변경되어야 함
#### 📌 비기능적 요구사항 
    - 결제 실패시 주문 롤백 
---
### 6.선착순 쿠폰 API
#### 📌 기능적 요구사항    
    - 매일 오전 10시 30명의 사용자에게 쿠폰 재공
    - 쿠폰의 사용기한은 발급 시점일로부터 3개월로 지정
    - 주문 시 쿠폰의 중복사용은 불가능
#### 📌 비기능적 요구사항
    - 동시에 다수의 사용자 접속 시 동시성 제어 필요
    - 특정 사용자에게 중복 제공 되지 않도록 해야함
---
### 7. 인기 상품 판매 API
#### 📌 기능적 요구사항    
    - 지난 3일 간 상품의 판매랑 조회 후 상위 10개 상품 사용자에게 노출
    - 같은 사용자의 주문 제외 후 판매량 조회
    - 매일 상품 데이터 조회 후 랭킹 변경
#### 📌 비기능적 요구사항
    - 조회 시간이 길어지지 않도록 조절 필요